{"version":3,"sources":["configs/index.ts","apis/webApi.ts","apis/attributes.ts","apis/categories.ts","apis/products.ts","utils/index.ts","models/actions/ActionTypes.ts","models/actions/index.ts","apis/customer.ts","components/CompColorPicker.tsx","components/CompQuantityInput.tsx","components/CompSizePicker.tsx","components/CompCartDialog.tsx","components/CompFooterNav.tsx","components/CompLoginDialog.tsx","components/CompRegisterDialog.tsx","components/CompTopNavBar.tsx","components/CompJumboTronCard.tsx","components/CompProductCard.tsx","components/CompProductPromotionCard.tsx","routers/HomePage.tsx","components/CompProductReviewEntry.tsx","components/CompProductReviewForm.tsx","components/CompProductReviewSession.tsx","routers/ProductPage.tsx","components/CompPaginationBar.tsx","routers/SearchPage.tsx","App.tsx","models/reducers/index.ts","models/reducers/Cart.ts","models/reducers/Categories.ts","models/reducers/Customer.ts","models/reducers/Products.ts","models/reducers/Dialogs.ts","models/dataStore.ts","serviceWorker.ts","index.tsx","models/DataProvider.tsx"],"names":["API_ENDPOINT","CDN_ROOT","API_REQUEST_TIMEOUT","api","WebApi","_this","this","Object","classCallCheck","loginChain","token","axios","loginResolve","handleApiError","error","errorResponse","response","data","code","field","message","status","Promise","reject","Axios","create","baseURL","timeout","resolve","createClass","key","value","_this2","defaults","headers","common","path","payload","arguments","length","undefined","usecache","cacheTimeout","url","concat","qs","stringify","cache","storeCache","get","expire","Date","now","then","res","set","catch","clearAll","each","val","startsWith","remove","inValidateCache","post","put","_this3","_this4","_this5","apiGetAttributes","apiGetAttributeById","id","result","pop","apiGetAttributeValueById","apiGetAttributesByProductId","apiGetCategories","page","limit","apiGetCategoryById","apiGetCategoriesByProductId","apiGetCategoriesByDepartmentId","apiGetProducts","descriptionLength","description_length","apiSearchProducts","query","allWords","query_string","all_words","apiGetProductById","apiGetProductByCategoryId","apiGetProductByDepartmentId","apiGetProductDetailById","apiGetProductLocationsById","apiGetProductReviewsById","apiPostProductReviewsById","productId","review","rating","authPost","isValidEmail","email","match","GET_DEPARTMENTS","GET_CATEGORIES","GET_PRODUCT_CATEGORIES","GET_PRODUCTS","SEARCH_PRODUCTS","GET_PRODUCT_DETAILS","GET_PRODUCT_ATTRIBUTES","GET_PRODUCT_REVIEWS","MODAL_DIALOG","CUSTOMER_LOGIN","CUSTOMER_LOGOUT","ADD_CART_ITEM","REMOVE_CART_ITEM","UPDATE_CART_ITEM","CHECKOUT_CART","actionGetProducts","dispatch","type","ActionTypes","params","isFetching","productApis","success","actionSeachProducts","queryString","actionGetProductReviews","actionPostProductReviews","isAuthorized","actionShowDialog","name","props","objectSpread","show","actionHideDialog","actionCustomerLogOut","auth","actionCustomerLogin","password","requesting","apiCustomerLogin","accessToken","user","actionCustomerRegister","apiRegisterCustomer","actionAddCartItem","product","attributes","quantity","actionRemoveCartItem","itemId","actionUpdateCartItemQuantity","actionCartCheckout","CompColorPicker","possibleConstructorReturn","getPrototypeOf","call","colorChangeHandler","color","activeColor","state","onColorChange","setState","colors","react_default","a","createElement","className","map","Button","style","width","height","backgroundColor","padding","border","boxShadow","onClick","React","Component","CompQuantityInput","_props$value","clear","_this$props","_this$props$min","min","_this$props$max","max","_this$props$step","step","onChange","_this$state","ButtonToolbar","aria-label","ButtonGroup","variant","Math","Remove_default","outline","toString","_onChange","_x","apply","e","parseInt","target","isNaN","preventDefault","Add_default","CompSizePicker","sizeChangeHandler","size","activeSize","onSizeChange","sizes","connect","_ref","Dialogs","cart","_ref$show","_ref$message","_ref$error","_ref$requesting","Cart","Customer","withSnackbar","_props$cart","items","total","Modal","aria-labelledby","centered","onHide","Header","closeButton","Title","keys","Body","Container","Row","Col","as","md","item","Media","src","image","alt","CompSizePicker_CompSizePicker","filter","s","attribute_name","attribute_value","CompColorPicker_CompColorPicker","CompQuantityInput_CompQuantityInput","subtotal","toFixed","Footer","disabled","enqueueSnackbar","CompFooterNav","href","login","index_es","Form","onSubmit","stopPropagation","formData","FormData","currentTarget","param","remember","Group","controlId","Control","placeholder","Check","readOnly","label","Text","register","reTypePassword","_location$search","location","search","parse","substr","_useState","useState","_useState2","slicedToArray","doSearch","Redirect","to","Navbar","bg","collapseOnSelect","expand","Link","Collapse","Nav","searchString","InputGroup","FormControl","Append","Search_default","IconButton_default","Badge_default","badgeContent","ShoppingCart_default","Toggle","aria-controls","CompJumboTronCard","Card","CompProductCard","_props$product","thumbnail","price","discounted_price","haveDiscounted","parseFloat","Img","ImgOverlay","es_Badge","product_id","CompProductPromotionCard","description","HomePage","products","react","Jumbotron","promotion","CardDeck","rows","slice","Products","CompProductReviewEntry","react_rating_default","readonly","initialRating","emptySymbol","StarBorder_default","fullSymbol","Star_default","human","created_on","control","icon","FavoriteBorder_default","checkedIcon","Favorite_default","CompProductReviewForm","defaultRating","method","toISOString","reset","Label","column","required","minlength","productReviews","ProductPage","addCartItem","productDetail","preventDuplicate","quantityChangeHandler","productImageChangeHandler","productImage","setTimeout","productAtrributes","colorAttributeValue","find","attr","attrColor","sizeAttributeValue","attrSize","actionGetProductDetail","categoryApis","actionGetProductCategories","attributeApis","actionGetProductAttributes","productCategories","categories","catName","image_2","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","Breadcrumb","Item","active","availableColors","availableSizes","img","margin","components_CompProductReviewSession","Categories","CompPaginationBar","pageCount","ceil","count","showCount","Array","from","leftEllipsis","rightEllipsis","splice","Pagination","First","onPage","p","index","Ellipsis","Last","SearchPage","_this$props$location$","_props$location$searc","array","chunkLength","chunks","i","push","arrayChunks","App","actionGetCategories","prevProps","window","scrollTo","components_CompTopNavBar","Route","exact","component","components_CompLoginDialog","components_CompRegisterDialog","components_CompCartDialog","withRouter","rootReducer","combineReducers","action","JSON","newState","forEach","categoriesDict","fetchingCount","category","category_id","cat","objectWithoutProperties","dialogProps","defineProperty","dataStore","createStore","composeWithDevTools","applyMiddleware","reduxThunk","reduxPromise","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","ReactDOM","render","es","store","children","BrowserRouter","build","anchorOrigin","vertical","horizontal","autoHideDuration","maxSnack","src_App","document","getElementById","URL","process","origin","addEventListener","fetch","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.bbc2aa46.chunk.js","sourcesContent":["export const API_ENDPOINT = 'https://backendapi.turing.com';\nexport const CDN_ROOT = 'https://backendapi.turing.com/images/products/';\nexport const API_REQUEST_TIMEOUT = 10000; // 10s\nexport const API_CACHE_TIMEOUT = 3600000; // 1h\n","import Axios, { AxiosError, AxiosInstance, AxiosPromise, AxiosResponse } from 'axios';\nimport qs from 'qs';\nimport storeCache from 'store';\nimport { API_CACHE_TIMEOUT, API_ENDPOINT, API_REQUEST_TIMEOUT } from '../configs';\n\nexport interface IApiError {\n  code: number;\n  field: string;\n  message: string;\n  status: number;\n}\n\nexport class WebApi {\n  public loginChain: Promise<any>;\n  private token: string;\n  private axios: AxiosInstance;\n  private loginResolve: () => void;\n\n  constructor () {\n    this.token = '';\n    this.axios = Axios.create({\n      baseURL: API_ENDPOINT,\n      timeout: API_REQUEST_TIMEOUT\n    });\n    this.loginResolve = () => '';\n    this.loginChain = new Promise((resolve) => {\n      this.loginResolve = resolve;\n    });\n  }\n\n  public auth (token: string) {\n    this.token = token;\n    this.axios.defaults.headers.common['user-key'] = token;\n    if (token) {\n      this.loginResolve();\n      this.loginResolve = () => '';\n      this.loginChain = Promise.resolve(token);\n    } else {\n      this.loginChain = new Promise((resolve) => {\n        this.loginResolve = resolve;\n      });\n    }\n  }\n\n  public isAuthorized () {\n    return !!this.token;\n  }\n\n  public handleApiError = (error: AxiosError): Promise<IApiError> => {\n    const errorResponse =\n      error.response && error.response.data\n        ? error.response.data.error\n        : {\n            code: error.code,\n            field: '',\n            message: error.message,\n            status: error.code\n          };\n    return Promise.reject(errorResponse);\n  }\n\n  public get (\n    path: string,\n    payload = null as any,\n    usecache = true,\n    cacheTimeout = API_CACHE_TIMEOUT\n  ): Promise<any> {\n    const url = `${path}?${qs.stringify(payload)}`;\n    if (usecache) {\n      const cache = storeCache.get(url);\n      if (cache && cache.expire > Date.now()) {\n        return Promise.resolve(cache.data);\n      }\n    }\n    return this.axios\n      .get(url)\n      .then((res) => res.data)\n      .then((data) => {\n        if (usecache) {\n          storeCache.set(url, {\n            data,\n            expire: Date.now() + cacheTimeout\n          });\n        }\n        return data;\n      })\n      .catch(this.handleApiError);\n  }\n\n  public inValidateCache (path = ''): void {\n    if (!path) {\n      storeCache.clearAll();\n    }\n    storeCache.each((val, key) => {\n      if (key.startsWith(path)) {\n        storeCache.remove(key);\n      }\n    });\n  }\n\n  public post (path: string, payload: any): Promise<any> {\n    // Clear cache under this path to ensure recieve latest data from the get api.\n    this.inValidateCache(path);\n    return this.axios\n      .post(path, payload)\n      .then((res: AxiosResponse): any => res.data || res)\n      .catch(this.handleApiError);\n  }\n\n  public put (path: string, payload: any): Promise<any> {\n    this.inValidateCache(path);\n    return this.axios\n      .put(path, payload)\n      .then((res: AxiosResponse): any => res.data || res)\n      .catch(this.handleApiError);\n  }\n\n  // authGet method  would check if user already logged in before exec the api call.\n  public authGet (\n    path: string,\n    payload = null as any,\n    usecache = true,\n    cacheTimeout = API_CACHE_TIMEOUT\n  ): Promise<any> {\n    return this.loginChain\n      .then(() => this.get(path, payload, usecache, cacheTimeout))\n      .catch(this.handleApiError);\n  }\n\n  public authPost (path: string, payload: any): Promise<any> {\n    return this.loginChain.then(() => this.post(path, payload)).catch(this.handleApiError);\n  }\n\n  public authPut (path: string, payload: any): Promise<any> {\n    return this.loginChain.then(() => this.put(path, payload)).catch(this.handleApiError);\n  }\n}\n\nconst api = new WebApi();\nif (process.env.NODE_ENV === 'development') {\n  (window as any).api = api;\n}\n\nexport default api;\n","import { IAttribute, IAttributeProductValue, IAttributeValue } from '../models/schemas';\nimport api from './webApi';\n\nexport function apiGetAttributes (): Promise<IAttribute[]> {\n  return api.get('/attributes');\n}\n\nexport function apiGetAttributeById (id: number): Promise<IAttribute> {\n  // According to https://backendapi.turing.com/docs/#/attributes/get_attributes__attribute_id_,\n  // The result the API is an array. It should return an object of attribute instead.\n  // TODO: double check with backend team for this case.\n  return api.get(`/attributes/${id}`).then((result) => result.pop());\n}\n\nexport function apiGetAttributeValueById (id: number): Promise<IAttributeValue> {\n  return api.get(`/attributes/values/${id}`);\n}\n\nexport function apiGetAttributesByProductId (id: number): Promise<IAttributeProductValue[]> {\n  return api.get(`/attributes/inProduct/${id}`);\n}\n","import { ICategoriesList, ICategory, IProductCategoryInfo } from '../models/schemas';\nimport api from './webApi';\n\nexport function apiGetCategories (page: number, limit: number): Promise<ICategoriesList> {\n  return api.get('/categories', { page, limit });\n}\n\nexport function apiGetCategoryById (id: number): Promise<ICategory> {\n  return api.get(`/categories/${id}`);\n}\n\nexport function apiGetCategoriesByProductId (id: number): Promise<IProductCategoryInfo[]> {\n  return api.get(`/categories/inProduct/${id}`);\n}\n\nexport function apiGetCategoriesByDepartmentId (id: number): Promise<ICategory[]> {\n  return api.get(`/categories/inDepartment/${id}`);\n}\n","import {\n  IProductComplete,\n  IProductDetail,\n  IProductList,\n  IProductLocations,\n  IReview\n} from '../models/schemas';\nimport api from './webApi';\n\nexport function apiGetProducts (page = 1, limit = 20, descriptionLength = 200): Promise<IProductList> {\n  return api.get('/products', { page, limit, description_length: descriptionLength });\n}\n\nexport function apiSearchProducts (\n  query: string,\n  allWords = 'on',\n  page = 1,\n  limit = 20,\n  descriptionLength = 200\n): Promise<IProductList> {\n  return api.get('/products/search', {\n    query_string: query,\n    all_words: allWords,\n    page,\n    limit,\n    description_length: descriptionLength\n  });\n}\n\nexport function apiGetProductById (id: number): Promise<IProductComplete> {\n  return api.get(`/products/${id}`);\n}\n\n// Get a list of Products of Categories\nexport function apiGetProductByCategoryId (id: number): Promise<IProductList> {\n  return api.get(`/products/inCategory/${id}`);\n}\n\n// Get a list of Products of Departments\nexport function apiGetProductByDepartmentId (id: number): Promise<IProductList> {\n  return api.get(`/products/inDepartment/${id}`);\n}\n\n// Get details of a product by product's id\nexport function apiGetProductDetailById (id: number): Promise<IProductDetail> {\n  return api.get(`/products/${id}/details`);\n}\n\n// Get locations of a product by product's id\nexport function apiGetProductLocationsById (id: number): Promise<IProductLocations> {\n  return api.get(`/products/${id}/locations`);\n}\n\n// Get reviews of a product by product's id\nexport function apiGetProductReviewsById (id: number): Promise<IReview[]> {\n  return api.get(`/products/${id}/reviews`);\n}\n\n// Post a review for a product.\nexport function apiPostProductReviewsById (productId: number, review: string, rating: number): Promise<any> {\n  return api.authPost(`/products/${productId}/reviews`, { review, rating });\n}\n","export function isValidEmail (email: string): boolean {\n  return !!(email && email.match(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/i));\n}\n\nexport function arrayChunks (array: any[], chunkLength: number): any[] {\n  const chunks = [];\n  for (let i = 0; i < array.length; i += chunkLength) {\n    chunks.push(array.slice(i, i + chunkLength));\n  }\n  return chunks;\n}\n","export const GET_DEPARTMENTS = 'GET_DEPARTMENTS';\nexport const GET_CATEGORIES = 'GET_CATEGORIES';\nexport const GET_PRODUCT_CATEGORIES = 'GET_PRODUCT_CATEGORIES';\n\nexport const GET_PRODUCTS = 'GET_PRODUCTS';\nexport const SEARCH_PRODUCTS = 'SEARCH_PRODUCTS';\nexport const GET_PRODUCT_DETAILS = 'GET_PRODUCT_DETAILS';\n\nexport const GET_PRODUCT_ATTRIBUTES = 'GET_PRODUCT_ATTRIBUTES';\nexport const GET_PRODUCT_REVIEWS = 'GET_PRODUCT_REVIEWS';\n\nexport const MODAL_DIALOG = 'MODAL_DIALOG';\nexport const CUSTOMER_LOGIN = 'CUSTOMER_LOGIN';\nexport const CUSTOMER_LOGOUT = 'CUSTOMER_LOGOUT';\n\nexport const ADD_CART_ITEM = 'ADD_CART';\nexport const REMOVE_CART_ITEM = 'REMOVE_CART';\nexport const UPDATE_CART_ITEM = 'UPDATE_CART_ITEM';\nexport const CHECKOUT_CART = 'CHECKOUT_CART';\n","import { Dispatch } from 'react';\nimport { DispatchProp } from 'react-redux';\nimport { attributeApis, categoryApis, productApis } from '../../apis';\nimport { apiCustomerLogin, apiRegisterCustomer } from '../../apis/customer';\nimport api, { IApiError } from '../../apis/webApi';\nimport { IDialogProps } from '../reducers/Dialogs';\nimport {\n  IAction,\n  IAttributeProductValue,\n  ICustomer,\n  ICustomerRegister,\n  IProductComplete,\n  IProductDetail,\n  IReview\n} from '../schemas';\nimport * as ActionTypes from './ActionTypes';\n\nexport const actionGetProducts = (page = 1, limit = 6): any => (\n  dispatch: (action: IAction) => void\n) => {\n  dispatch({\n    type: ActionTypes.GET_PRODUCTS,\n    params: {\n      isFetching: true\n    }\n  });\n  return productApis\n    .apiGetProducts(page, limit)\n    .then((result) =>\n      dispatch({\n        type: ActionTypes.GET_PRODUCTS,\n        params: {\n          isFetching: false,\n          success: true,\n          data: result,\n          page,\n          limit\n        }\n      })\n    )\n    .catch((error) => {\n      dispatch({\n        type: ActionTypes.GET_PRODUCTS,\n        params: {\n          isFetching: false,\n          success: false,\n          error\n        }\n      });\n    });\n};\n\nexport const actionSeachProducts = (\n  query: string,\n  allWords = 'off',\n  page = 1,\n  limit = 6\n): any => (dispatch: (action: IAction) => void) => {\n  dispatch({\n    type: ActionTypes.GET_PRODUCTS,\n    params: {\n      isFetching: true\n    }\n  });\n  return productApis\n    .apiSearchProducts(query, allWords, page, limit)\n    .then((result) =>\n      dispatch({\n        type: ActionTypes.GET_PRODUCTS,\n        params: {\n          isFetching: false,\n          success: true,\n          data: result,\n          page,\n          limit,\n          queryString: query\n        }\n      })\n    )\n    .catch((error) => {\n      dispatch({\n        type: ActionTypes.GET_PRODUCTS,\n        params: {\n          isFetching: false,\n          success: false,\n          error\n        }\n      });\n    });\n};\n\nexport const actionGetProductDetail = (productId: number): any => (\n  dispatch: (action: IAction) => void\n) => {\n  return productApis.apiGetProductById(productId).then((result) =>\n    dispatch({\n      type: ActionTypes.GET_PRODUCT_DETAILS,\n      params: {\n        success: true,\n        productId,\n        data: result\n      }\n    })\n  );\n};\n\nexport const actionGetCategories = (page = 1, limit = 20): any => (\n  dispatch: (action: IAction) => void\n) => {\n  dispatch({\n    type: ActionTypes.GET_CATEGORIES,\n    params: {\n      isFetching: true\n    }\n  });\n  return categoryApis\n    .apiGetCategories(page, limit)\n    .then((result) =>\n      dispatch({\n        type: ActionTypes.GET_CATEGORIES,\n        params: {\n          isFetching: false,\n          success: true,\n          data: result,\n          page,\n          limit\n        }\n      })\n    )\n    .catch((error) => {\n      dispatch({\n        type: ActionTypes.GET_CATEGORIES,\n        params: {\n          isFetching: false,\n          success: false,\n          error\n        }\n      });\n    });\n};\n\nexport const actionGetProductCategories = (productId: number): any => (\n  dispatch: (action: IAction) => void\n) => {\n  return categoryApis.apiGetCategoriesByProductId(productId).then((result) =>\n    dispatch({\n      type: ActionTypes.GET_PRODUCT_CATEGORIES,\n      params: {\n        success: true,\n        productId,\n        data: result\n      }\n    })\n  );\n};\n\nexport const actionGetProductAttributes = (productId: number): any => (\n  dispatch: (action: IAction) => void\n) => {\n  return attributeApis.apiGetAttributesByProductId(productId).then((result) =>\n    dispatch({\n      type: ActionTypes.GET_PRODUCT_ATTRIBUTES,\n      params: {\n        success: true,\n        productId,\n        data: result\n      }\n    })\n  );\n};\n\nexport const actionGetProductReviews = (productId: number): any => (\n  dispatch: (action: IAction) => void\n) => {\n  return productApis.apiGetProductReviewsById(productId).then((result) =>\n    dispatch({\n      type: ActionTypes.GET_PRODUCT_REVIEWS,\n      params: {\n        success: true,\n        productId,\n        data: result\n      }\n    })\n  );\n};\n\nexport const actionPostProductReviews = (productId: number, review: IReview): any => (\n  dispatch: (action: IAction) => void\n) => {\n  if (!api.isAuthorized()) {\n    dispatch(actionShowDialog('login', {}));\n  }\n  return productApis\n    .apiPostProductReviewsById(productId, review.review, review.rating)\n    .then(() => dispatch(actionGetProductReviews(productId)));\n};\n\nexport const actionShowDialog = (name: string, props: IDialogProps): IAction => {\n  return {\n    type: ActionTypes.MODAL_DIALOG,\n    params: {\n      name,\n      ...props,\n      show: true\n    }\n  };\n};\n\nexport const actionHideDialog = (name: string): IAction => {\n  return {\n    type: ActionTypes.MODAL_DIALOG,\n    params: {\n      name,\n      show: false\n    }\n  };\n};\n\nexport const actionCustomerLogOut = (): IAction => {\n  api.auth('');\n  return {\n    type: ActionTypes.CUSTOMER_LOGOUT,\n    params: {}\n  };\n};\n\nexport const actionCustomerLogin = (email: string, password: string): any => (\n  dispatch: (action: IAction) => void\n) => {\n  dispatch(\n    actionShowDialog('login', {\n      requesting: true\n    })\n  );\n  return apiCustomerLogin(email, password)\n    .then((result: ICustomerRegister) => {\n      api.auth(result.accessToken);\n      dispatch(actionHideDialog('login'));\n      dispatch({\n        type: ActionTypes.CUSTOMER_LOGIN,\n        params: result.user\n      });\n      return result;\n    })\n    .catch((error: IApiError) => {\n      dispatch(\n        actionShowDialog('login', {\n          error: error.message\n        })\n      );\n    });\n};\n\nexport const actionCustomerRegister = (email: string, password: string): any => (\n  dispatch: (action: IAction) => void\n) => {\n  dispatch(\n    actionShowDialog('register', {\n      requesting: true\n    })\n  );\n  return apiRegisterCustomer(email, email, password)\n    .then((result: ICustomerRegister) => {\n      api.auth(result.accessToken);\n      dispatch(actionHideDialog('register'));\n      dispatch({\n        type: ActionTypes.CUSTOMER_LOGIN,\n        params: result.user\n      });\n      return result;\n    })\n    .catch((error: IApiError) => {\n      dispatch(\n        actionShowDialog('register', {\n          error: error.message\n        })\n      );\n    });\n};\n\nexport const actionAddCartItem = (\n  product: IProductComplete,\n  attributes: IAttributeProductValue[],\n  quantity: number\n): IAction => {\n  return {\n    type: ActionTypes.ADD_CART_ITEM,\n    params: {\n      product,\n      attributes,\n      quantity\n    }\n  };\n};\n\nexport const actionRemoveCartItem = (itemId: string): IAction => {\n  return {\n    type: ActionTypes.REMOVE_CART_ITEM,\n    params: {\n      itemId\n    }\n  };\n};\n\nexport const actionUpdateCartItemQuantity = (itemId: string, quantity: number): IAction => {\n  return {\n    type: ActionTypes.UPDATE_CART_ITEM,\n    params: {\n      itemId,\n      quantity\n    }\n  };\n};\n\nexport const actionCartCheckout = (): IAction => {\n  return {\n    type: ActionTypes.CHECKOUT_CART,\n    params: {}\n  };\n};\n","import { ICustomer, ICustomerAddress, ICustomerRegister } from '../models/schemas';\nimport { isValidEmail } from '../utils';\nimport api from './webApi';\n\nexport function apiUpdateCustomer (customer: ICustomer): Promise<any> {\n  if (!api.isAuthorized()) {\n    return Promise.reject('User unauthorized!');\n  }\n  const { customer_id, ...profiles } = customer;\n  return api.put('/customer', profiles);\n}\n\nexport function apiGetCustomer (): Promise<ICustomer> {\n  return api.get('/customer');\n}\n\nexport function apiRegisterCustomer (name: string, email: string, password: string): Promise<any> {\n  // Validate data first\n  if (!name || !password || !isValidEmail(email)) {\n    return Promise.reject('Invalid parameters!');\n  }\n  return api.post('/customers', { name, email, password });\n}\n\nexport function apiCustomerLogin (email: string, password: string): Promise<ICustomerRegister> {\n  // Validate data first\n  if (!password || !isValidEmail(email)) {\n    return Promise.reject('Invalid parameters!');\n  }\n  return api.post('/customers/login', { email, password });\n}\n\n// Sign in with a facebook login token.\nexport function apiCustomerFacebookLogin (accessToken: string): Promise<ICustomerRegister> {\n  // Validate data first\n  if (!accessToken) {\n    return Promise.reject('Invalid parameters!');\n  }\n  return api.post('/customers/facebook', { access_token: accessToken});\n}\n\n// Update the address from customer\nexport function apiUpdateCustomerAddress (address: ICustomerAddress): Promise<any> {\n  if (!api.isAuthorized()) {\n    return Promise.reject('User unauthorized!');\n  }\n  return api.put('/customers/address', address);\n}\n\n// Update the credit card from customer\nexport function apiUpdateCustomerCreditCard (creditCard: string): Promise<any> {\n  if (!api.isAuthorized()) {\n    return Promise.reject('User unauthorized!');\n  }\n  return api.put('/customers/creditCard', {credit_card: creditCard});\n}\n","import React from 'react';\nimport { Button, ButtonToolbar } from 'react-bootstrap';\nimport { ButtonGroup } from 'react-bootstrap';\n\nexport interface IColorPickerProps {\n  colors: string[];\n  activeColor?: string;\n  onColorChange?: (color: string) => void;\n}\n\nexport interface IColorPickerState {\n  activeColor: string;\n}\n\nexport default class CompColorPicker extends React.Component<\n  IColorPickerProps,\n  IColorPickerState\n> {\n  constructor (props: IColorPickerProps) {\n    super(props);\n    this.state = {\n      activeColor: props.activeColor || ''\n    };\n  }\n\n  public colorChangeHandler = (color: string) => () => {\n    const { activeColor } = this.state;\n    const { onColorChange } = this.props;\n    if (color !== activeColor) {\n      this.setState({ activeColor: color });\n      onColorChange && onColorChange(color);\n    }\n  }\n\n  public render () {\n    const props = this.props;\n    const { activeColor } = this.state;\n    if (!this.state.activeColor && props.colors.length) {\n      this.colorChangeHandler(props.colors[0])();\n    }\n    return (\n      <div className='mr-2 mb-2'>\n        {props.colors.map((color) => (\n          <Button\n            className='rounded-circle mr-3 mb-2'\n            style={{\n              width: '1rem',\n              height: '1rem',\n              backgroundColor: color,\n              padding: 0,\n              border: 'solid 3px #fff',\n              boxShadow: `0px 0px 2px 2px ${\n                color === activeColor ? '#f62f5e' : 'rgba(0,0,0,0.2)'\n              }`\n            }}\n            onClick={this.colorChangeHandler(color)}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","import AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport React from 'react';\nimport { Button, ButtonToolbar, Form } from 'react-bootstrap';\nimport { ButtonGroup } from 'react-bootstrap';\n\nexport interface IQuantityInputProps {\n  max?: number;\n  min?: number;\n  step?: number;\n  value?: number;\n  onChange?: (value: number) => void;\n}\n\nexport interface IQuantityInputState {\n  value: number;\n  clear: boolean;\n}\n\nexport default class CompQuantityInput extends React.Component<\n  IQuantityInputProps,\n  IQuantityInputState\n> {\n  constructor (props: IQuantityInputProps) {\n    super(props);\n    const { value = 1 } = props;\n    this.state = {\n      value,\n      clear: false\n    };\n  }\n\n  public render () {\n    const { min = 1, max = 99, step = 1, onChange } = this.props;\n    const { value, clear } = this.state;\n\n    return (\n      <ButtonToolbar aria-label='Size picker'>\n        <ButtonGroup className='mr-2'>\n          <Button\n            style={{ width: '2rem', height: '2rem', padding: 0, boxShadow: 'none' }}\n            variant='outline-secondary'\n            className='rounded-circle mr-2 bg-light'\n            onClick={() => {\n              let val = value - step;\n              val = Math.max(min, Math.min(val, max));\n              this.setState({ value: val, clear: false });\n              onChange && onChange(val);\n            }}>\n            <RemoveIcon />\n          </Button>\n          <input\n            style={{ width: '4rem', height: '2rem', padding: 0, outline: 'none' }}\n            className='border border-secondary rounded-pill mr-2 text-center'\n            value={clear ? '' : value.toString(10)}\n            onChange={(e) => {\n              let val = parseInt(e.target.value, 10);\n              val = Math.max(min, Math.min(val, max));\n              if (isNaN(val)) {\n                this.setState({ clear: true });\n              } else {\n                this.setState({ value: val, clear: false });\n                onChange && onChange(val);\n              }\n              e.preventDefault();\n            }}\n          />\n          <Button\n            style={{ width: '2rem', height: '2rem', padding: 0, boxShadow: 'none' }}\n            variant='outline-secondary'\n            className='rounded-circle mr-2 bg-light'\n            onClick={() => {\n              let val = value + step;\n              val = Math.max(min, Math.min(val, max));\n              this.setState({ value: val, clear: false });\n              onChange && onChange(val);\n            }}>\n            <AddIcon />\n          </Button>\n        </ButtonGroup>\n      </ButtonToolbar>\n    );\n  }\n}\n","import React from 'react';\nimport { Button, ButtonToolbar } from 'react-bootstrap';\nimport { ButtonGroup } from 'react-bootstrap';\n\nexport interface ISizePickerProps {\n  sizes: string[];\n  activeSize?: string;\n  onSizeChange?: (size: string) => void;\n}\n\nexport interface ISizePickerState {\n  activeSize: string;\n}\n\nexport default class CompSizePicker extends React.Component<\n  ISizePickerProps,\n  ISizePickerState\n> {\n  constructor (props: ISizePickerProps) {\n    super(props);\n    this.state = {\n      activeSize: props.activeSize || ''\n    };\n  }\n\n  public sizeChangeHandler = (size: string) => () => {\n    const { activeSize } = this.state;\n    const { onSizeChange } = this.props;\n    if (size !== activeSize) {\n      this.setState({ activeSize: size });\n      onSizeChange && onSizeChange(size);\n    }\n  }\n\n  public render () {\n    const props = this.props;\n    const { activeSize } = this.state;\n    if (!activeSize && props.sizes.length) {\n      this.sizeChangeHandler(props.sizes[0])();\n    }\n\n    return (\n      <div className='mr-2 mb-2'>\n        {props.sizes.map((size) => (\n          <Button\n            style={{ boxShadow: 'none' }}\n            variant={size === activeSize ? 'danger' : 'light'}\n            className='sm border-light rounded mb-2 mr-2'\n            onClick={this.sizeChangeHandler(size)}>\n            {size}\n          </Button>\n        ))}\n      </div>\n    );\n  }\n}\n","import { CircularProgress } from '@material-ui/core';\nimport { withSnackbar, withSnackbarProps } from 'notistack';\nimport { FormEvent } from 'react';\nimport React from 'react';\nimport { Card } from 'react-bootstrap';\nimport { Media } from 'react-bootstrap';\nimport { Button, Col, Container, Modal, Row, Table } from 'react-bootstrap';\nimport { connect, DispatchProp } from 'react-redux';\nimport api from '../apis/webApi';\nimport { CDN_ROOT } from '../configs';\nimport {\n  actionCartCheckout,\n  actionHideDialog,\n  actionRemoveCartItem,\n  actionShowDialog,\n  actionUpdateCartItemQuantity\n} from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { ICartState } from '../models/reducers/Cart';\nimport { IDialogProps } from '../models/reducers/Dialogs';\nimport { ICustomer } from '../models/schemas';\nimport CompColorPicker from './CompColorPicker';\nimport CompQuantityInput from './CompQuantityInput';\nimport CompSizePicker from './CompSizePicker';\n\ninterface ICartDialogProps extends DispatchProp, IDialogProps, withSnackbarProps {\n  cart: ICartState;\n  user: ICustomer;\n}\n\nfunction CompCartDialog (props: ICartDialogProps) {\n  const {\n    cart: { items, total }\n  } = props;\n  return (\n    <Modal\n      size='lg'\n      show={props.show}\n      aria-labelledby='contained-modal-title-vcenter'\n      centered\n      onHide={() => {\n        props.dispatch(actionHideDialog('cart'));\n      }}>\n      <Modal.Header closeButton>\n        <Modal.Title className='w-100'>\n          <h3>{Object.keys(items).length} Items In Your Cart</h3>\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body className='p-4'>\n        <Container>\n          <Row className='border-bottom text-muted p-2'>\n            <Col as='h6' md={6}>\n              Item\n            </Col>\n            <Col as='h6' md={1}>\n              Size\n            </Col>\n            <Col as='h6' md={1}>\n              Color\n            </Col>\n            <Col as='h6' md={3}>\n              Quantity\n            </Col>\n            <Col as='h6' md={1}>\n              Price\n            </Col>\n          </Row>\n          {Object.keys(items).map((itemId) => {\n            const item = items[itemId];\n            return (\n              <Row className='text-muted p-2 my-4'>\n                <Col md={6}>\n                  <Media>\n                    <img\n                      width={96}\n                      height={96}\n                      className='mr-3'\n                      src={`${CDN_ROOT}${item.product.image}`}\n                      alt={item.product.name}\n                    />\n                    <Media.Body>\n                      <h6>{item.product.name}</h6>\n                      <span\n                        className='text-muted cursor-pointer'\n                        onClick={() => {\n                          props.dispatch(actionRemoveCartItem(itemId));\n                        }}>\n                        <span className='text-danger px-2'>X</span> Remove\n                      </span>\n                    </Media.Body>\n                  </Media>\n                </Col>\n                <Col md={1}>\n                  <CompSizePicker\n                    sizes={item.attributes\n                      .filter((s) => s.attribute_name === 'Size')\n                      .map((a) => a.attribute_value)}\n                  />\n                </Col>\n                <Col md={1} className='pt-2'>\n                  <CompColorPicker\n                    colors={item.attributes\n                      .filter((s) => s.attribute_name === 'Color')\n                      .map((a) => a.attribute_value)}\n                  />\n                </Col>\n                <Col md={3}>\n                  <CompQuantityInput\n                    value={item.quantity}\n                    onChange={(val) => {\n                      props.dispatch(actionUpdateCartItemQuantity(itemId, val));\n                    }}\n                  />\n                </Col>\n                <Col as='h6' md={1}>\n                  ${item.subtotal.toFixed(2)}\n                </Col>\n              </Row>\n            );\n          })}\n        </Container>\n      </Modal.Body>\n      <Modal.Footer>\n        <Container className='d-flex justify-content-between'>\n          <Button\n            variant='outline-danger'\n            size='lg'\n            className='rounded-pill'\n            onClick={() => {\n              props.dispatch(actionHideDialog('cart'));\n            }}>\n            Back To Shop\n          </Button>\n          <Button\n            variant='danger'\n            size='lg'\n            className='rounded-pill'\n            disabled={!Object.keys(props.cart.items).length}\n            onClick={() => {\n              if (!props.user.name) {\n                props.dispatch(actionShowDialog('login', {}));\n              }\n              props.dispatch(actionHideDialog('cart'));\n              api.loginChain.then(() => {\n                props.dispatch(actionCartCheckout());\n                props.enqueueSnackbar(\n                  <span>\n                    Your order <strong>#{Date.now()}</strong> was created successfully!\n                  </span>,\n                  { variant: 'success' }\n                );\n              });\n            }}>\n            Check Out\n          </Button>\n        </Container>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n\nexport default connect((state: IRootState) => {\n  const { show = false, message = '', error = '', requesting = false } =\n    state.Dialogs.cart || {};\n  return { show, message, error, requesting, cart: state.Cart, user: state.Customer };\n})(withSnackbar(CompCartDialog));\n","import React from 'react';\nimport { Card, Row } from 'react-bootstrap';\nimport { Col } from 'react-bootstrap';\nimport { Container } from 'react-bootstrap';\n\nexport default function CompFooterNav (props: any) {\n  return (\n    <Container className='footerNav'>\n      <Row>\n        <Col md={3}>\n          <h5>QUESTION?</h5>\n          <div>\n            <div>\n              <a href='/help'>Help</a>\n            </div>\n            <div>\n              <a href='/track'>Track Order</a>\n            </div>\n            <div>\n              <a href='/return'>Returns</a>\n            </div>\n          </div>\n        </Col>\n        <Col md={3}>\n          <h5>WHAT'S IN STORE</h5>\n          <div>\n            <div>\n              <a href='/help'>Women</a>\n            </div>\n            <div>\n              <a href='/track'>Men</a>\n            </div>\n            <div>\n              <a href='/return'>Product A-Z</a>\n            </div>\n            <div>\n              <a href='/'>Buy Gift Vouchers</a>\n            </div>\n          </div>\n        </Col>\n        <Col md={3}>\n          <h5>FOLLOW US</h5>\n          <div>\n            <div>\n              <a href='https://facebook.com'>Facebook</a>\n            </div>\n            <div>\n              <a href='https://twitter.com'>Twitter</a>\n            </div>\n            <div>\n              <a href='https://youtube.com'>Youtube</a>\n            </div>\n          </div>\n        </Col>\n        <Col md={3}>\n          <p>@2019 nmhung1210</p>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n","import { Card, CircularProgress } from '@material-ui/core';\nimport React from 'react';\nimport { FormEvent } from 'react';\nimport { Button, Col, Container, Modal, Row } from 'react-bootstrap';\nimport { Form } from 'react-bootstrap';\nimport { connect, DispatchProp } from 'react-redux';\nimport { actionCustomerLogin, actionHideDialog, actionShowDialog } from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { IDialogProps } from '../models/reducers/Dialogs';\n\ninterface ILoginModalProps extends DispatchProp, IDialogProps {}\n\nfunction CompLoginDialog (props: ILoginModalProps) {\n  return (\n    <Modal\n      size='sm'\n      show={props.show}\n      aria-labelledby='contained-modal-title-vcenter'\n      centered\n      onHide={() => {\n        props.dispatch(actionHideDialog('login'));\n      }}>\n      <Card className='text-center'>\n        <Form\n          onSubmit={(e: FormEvent<HTMLFormElement>) => {\n            e.preventDefault();\n            e.stopPropagation();\n            const formData = new FormData(e.currentTarget);\n            const param = {\n              email: formData.get('email') as string,\n              password: formData.get('password') as string,\n              remember: !!formData.get('remember')\n            };\n            props.dispatch(actionCustomerLogin(param.email, param.password));\n            return false;\n          }}>\n          <Modal.Header closeButton>\n            <Modal.Title className='text-center w-100'>\n              <h3>Sign in</h3>\n            </Modal.Title>\n          </Modal.Header>\n          <Modal.Body className='p-4'>\n            <Form.Group controlId='formBasicEmail'>\n              <Form.Control\n                disabled={!!props.requesting}\n                type='email'\n                name='email'\n                placeholder='Enter email'\n                size='lg'\n              />\n            </Form.Group>\n            <Form.Group controlId='formBasicPassword'>\n              <Form.Control\n                disabled={!!props.requesting}\n                type='password'\n                name='password'\n                placeholder='Password'\n                size='lg'\n              />\n            </Form.Group>\n            <Form.Group controlId='formBasicChecbox'>\n              <Form.Check\n                readOnly={!!props.requesting}\n                type='checkbox'\n                name='remember'\n                value='remember'\n                label='Remember me'\n              />\n            </Form.Group>\n            <Form.Group controlId='formErrorMessage'>\n              <Form.Text className='text-danger'>{props.error}</Form.Text>\n            </Form.Group>\n            <Button\n              size='lg'\n              disabled={!!props.requesting}\n              variant='danger'\n              type='submit'\n              className='px-4 rounded-pill'>\n              {props.requesting ? (\n                <CircularProgress size='1.5rem' className='text-light' />\n              ) : null}{' '}\n              Sign in\n            </Button>\n          </Modal.Body>\n          <Modal.Footer className='p-1'>\n            <Container className='d-flex justify-content-between p-0'>\n              <Button\n                variant='link'\n                size='sm'\n                className='text-danger'\n                onClick={() => {\n                  // TODO: Implement for forgot password\n                }}>\n                Forgot password?\n              </Button>\n              <Button\n                variant='link'\n                size='sm'\n                className='text-danger'\n                onClick={() => {\n                  props.dispatch(actionHideDialog('login'));\n                  props.dispatch(actionShowDialog('register', {}));\n                }}>\n                Create an account\n              </Button>\n            </Container>\n          </Modal.Footer>\n        </Form>\n      </Card>\n    </Modal>\n  );\n}\n\nexport default connect((state: IRootState) => {\n  const { show = false, message = '', error = '', requesting = false } =\n    state.Dialogs.login || {};\n  return { show, message, error, requesting };\n})(CompLoginDialog);\n","import { Card, CircularProgress } from '@material-ui/core';\nimport React from 'react';\nimport { FormEvent } from 'react';\nimport { Button, Col, Container, Modal, Row } from 'react-bootstrap';\nimport { Form } from 'react-bootstrap';\nimport { connect, DispatchProp } from 'react-redux';\nimport { actionCustomerRegister, actionHideDialog, actionShowDialog } from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { IDialogProps } from '../models/reducers/Dialogs';\n\ninterface IRegisterModalProps extends DispatchProp, IDialogProps {}\n\nfunction CompRegisterDialog(props: IRegisterModalProps) {\n  return (\n    <Modal\n      size='sm'\n      show={props.show}\n      aria-labelledby='contained-modal-title-vcenter'\n      centered\n      onHide={() => {\n        props.dispatch(actionHideDialog('register'));\n      }}>\n      <Card className='text-center'>\n        <Form\n          onSubmit={(e: FormEvent<HTMLFormElement>) => {\n            e.preventDefault();\n            e.stopPropagation();\n            const formData = new FormData(e.currentTarget);\n            const param = {\n              email: formData.get('email') as string,\n              password: formData.get('password') as string,\n              reTypePassword: formData.get('reTypePassword') as string\n            };\n            if (param.password !== param.reTypePassword) {\n              props.dispatch(\n                actionShowDialog('register', { error: 'Password does not match!' })\n              );\n            } else {\n              props.dispatch(actionCustomerRegister(param.email, param.password));\n            }\n            return false;\n          }}>\n          <Modal.Header closeButton>\n            <Modal.Title className='text-center w-100'>\n              <h3>Register</h3>\n            </Modal.Title>\n          </Modal.Header>\n          <Modal.Body className='p-4'>\n            <Form.Group controlId='formBasicEmail'>\n              <Form.Control\n                disabled={!!props.requesting}\n                type='email'\n                name='email'\n                placeholder='Enter email'\n                size='lg'\n              />\n            </Form.Group>\n            <Form.Group controlId='formBasicPassword'>\n              <Form.Control\n                disabled={!!props.requesting}\n                type='password'\n                name='password'\n                placeholder='Password'\n                size='lg'\n              />\n            </Form.Group>\n            <Form.Group controlId='formBasicPassword'>\n              <Form.Control\n                disabled={!!props.requesting}\n                type='password'\n                name='reTypePassword'\n                placeholder='Re-type Password'\n                size='lg'\n              />\n            </Form.Group>\n            <Form.Group controlId='formErrorMessage'>\n              <Form.Text className='text-danger'>{props.error}</Form.Text>\n            </Form.Group>\n            <Button\n              size='lg'\n              disabled={!!props.requesting}\n              variant='danger'\n              type='submit'\n              className='px-4 rounded-pill'>\n              {props.requesting ? (\n                <CircularProgress size='1.5rem' className='text-light' />\n              ) : null}{' '}\n              Register\n            </Button>\n          </Modal.Body>\n          <Modal.Footer className='p-1'>\n            <Container className='d-flex justify-content-between p-1'>\n              <span>Already have an account?</span>\n              <Button\n                variant='link'\n                size='sm'\n                className='text-danger'\n                onClick={() => {\n                  props.dispatch(actionHideDialog('register'));\n                  props.dispatch(actionShowDialog('login', {}));\n                }}>\n                Sign in\n              </Button>\n            </Container>\n          </Modal.Footer>\n        </Form>\n      </Card>\n    </Modal>\n  );\n}\n\nexport default connect((state: IRootState) => {\n  const { show = false, message = '', error = '', requesting = false } =\n    state.Dialogs.register || {};\n  return { show, message, error, requesting };\n})(CompRegisterDialog);\n","import Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport qs from 'qs';\nimport React, { FormEvent, FormEventHandler, SyntheticEvent, useState } from 'react';\nimport { ButtonToolbar, Container, InputGroup, Nav, Navbar, Row } from 'react-bootstrap';\nimport { FormControl } from 'react-bootstrap';\nimport { Form } from 'react-bootstrap';\nimport { Col } from 'react-bootstrap';\nimport { connect, DispatchProp } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport { actionCustomerLogOut, actionShowDialog } from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { ICartState } from '../models/reducers/Cart';\nimport { ICustomer } from '../models/schemas';\n\ninterface ITopNavBarProps extends DispatchProp {\n  user: ICustomer;\n  cart: ICartState;\n}\n\nfunction CompTopNavBar (props: ITopNavBarProps) {\n  const { user, cart } = props;\n  const { search = '' } = location;\n  const query = qs.parse(search.substr(1));\n  const [queryString, doSearch] = useState(\n    query && query.query_string ? query.query_string : ''\n  );\n  return (\n    <div className='sticky-top'>\n      {<Redirect to={`/search?query_string=${queryString}`} />}\n      <Navbar bg='dark text-light py-1'>\n        {user.name ? (\n          <h6 className='m-2'>\n            Hi{`  ${user.name},  `}\n            <span\n              className='text-danger py-1 cursor-pointer'\n              onClick={() => props.dispatch(actionCustomerLogOut())}>\n              Sign out\n            </span>\n            {'  '}\n          </h6>\n        ) : (\n          <h6 className='m-2'>\n            Hi{'  '}\n            <span\n              className='text-danger py-1 cursor-pointer'\n              onClick={() => props.dispatch(actionShowDialog('login', {}))}>\n              Sign in\n            </span>\n            {'  '}\n            or{'  '}\n            <span\n              className='text-danger p-1 cursor-pointer'\n              onClick={() => props.dispatch(actionShowDialog('register', {}))}>\n              Register\n            </span>\n          </h6>\n        )}\n      </Navbar>\n      <Navbar collapseOnSelect expand='lg' bg='light' variant='light'>\n        <Link to='/' className='brandName'>\n          SHOPMATE\n        </Link>\n        <Navbar.Collapse>\n          <Container>\n            <Row className='justify-content-md-center'>\n              <Col md='1' />\n              <Col md='7'>\n                <Nav className='mr-auto'>\n                  <Link to='/search?query_string=flower' className='mainNavItem'>\n                    Women\n                  </Link>\n                  <Link to='/search?query_string=coat' className='mainNavItem'>\n                    Men\n                  </Link>\n                  <Link to='/search?query_string=baby' className='mainNavItem'>\n                    Kids\n                  </Link>\n                  <Link to='/search?query_string=shose' className='mainNavItem'>\n                    Shose\n                  </Link>\n                  <Link to='/search?query_string=' className='mainNavItem'>\n                    Brands\n                  </Link>\n                </Nav>\n              </Col>\n              <Col md='4'>\n                <Nav className='justify-content-end'>\n                  <Form\n                    onSubmit={(e: FormEvent<HTMLFormElement>) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      const formData = new FormData(e.currentTarget);\n                      const searchString = formData.get('search') as string;\n                      doSearch(searchString);\n                      return false;\n                    }}>\n                    <InputGroup className='m-2'>\n                      <FormControl\n                        type='search'\n                        name='search'\n                        placeholder='Search'\n                        size='sm'\n                      />\n                      <InputGroup.Append>\n                        <InputGroup.Text className='form-control-sm'>\n                          <SearchIcon />\n                        </InputGroup.Text>\n                      </InputGroup.Append>\n                    </InputGroup>\n                  </Form>\n\n                  <IconButton\n                    aria-label='Cart'\n                    onClick={() => {\n                      props.dispatch(actionShowDialog('cart', {}));\n                    }}>\n                    <Badge badgeContent={Object.keys(cart.items).length} color='secondary'>\n                      <ShoppingCartIcon />\n                    </Badge>\n                  </IconButton>\n                </Nav>\n              </Col>\n            </Row>\n          </Container>\n          <Nav />\n        </Navbar.Collapse>\n        <Navbar.Toggle aria-controls='responsive-navbar-nav' />\n      </Navbar>\n    </div>\n  );\n}\n\nexport default connect((state: IRootState) => {\n  return {\n    user: state.Customer,\n    cart: state.Cart\n  };\n})(CompTopNavBar);\n","import React from 'react';\nimport { Button, Card, Carousel, Container, Jumbotron, Row } from 'react-bootstrap';\n\n// This is a mad head item that focusing on proposal new hot on the site.\n// TODO: Intergrate with backend to have it act like carousel series of hot things.\nexport default function CompJumboTronCard (props: any) {\n  return (\n    <Card>\n      <Card.Body>\n        <Card.Title>New Trend</Card.Title>\n        <Card.Text>Scandi-cool</Card.Text>\n        <Button variant='danger' className='rounded-pill' size='lg'>\n          SHOP NOW\n        </Button>\n      </Card.Body>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { Button, Card, Col, Container, Row } from 'react-bootstrap';\nimport { Badge } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { CDN_ROOT } from '../configs';\nimport { IProduct } from '../models/schemas';\n\nexport interface IProductCardProps {\n  product: IProduct;\n}\n\nexport default function CompProductCard (props: IProductCardProps) {\n  const { name, thumbnail, price, discounted_price } = props.product;\n  const haveDiscounted = parseFloat(discounted_price) > 0;\n  return (\n    <Card as={Col} md='4' className='p-0'>\n      <Card.Img src={`${CDN_ROOT}${thumbnail}`} className='p-4' />\n      {haveDiscounted ? (\n        <Card.ImgOverlay>\n          <h4>\n            <Badge variant='danger'>HOT</Badge>\n          </h4>\n        </Card.ImgOverlay>\n      ) : null}\n      <Card.Body className='d-flex flex-column text-center'>\n        <Card.Title as='h5'>{name}</Card.Title>\n        <Card.Text as='h5' className='mt-4 mb-4'>\n          <span className='text-danger pr-3'>${haveDiscounted ? discounted_price : price}</span>\n          {haveDiscounted ? (\n            <sup>\n              <del>${price}</del>\n            </sup>\n          ) : null}\n        </Card.Text>\n      </Card.Body>\n      <div className='productCover position-absolute w-100 h-100  d-flex align-items-center justify-content-center'>\n        <Link\n          to={`/product/${props.product.product_id}`}\n          className='btn btn-danger rounded-pill'>\n          Buy now\n        </Link>\n      </div>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { Button, Card, Col, Container, Row } from 'react-bootstrap';\nimport { Badge } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { CDN_ROOT } from '../configs';\nimport { IProduct } from '../models/schemas';\n\nexport interface IProductPromotionCardProps {\n  product: IProduct;\n}\n\nexport default function CompProductPromotionCard (props: IProductPromotionCardProps) {\n  const { name, description, thumbnail } = props.product;\n  return (\n    <Card className='border-0 p-4'>\n      <Row>\n        <Col md={4}>\n          <Card.Img src={`${CDN_ROOT}${thumbnail}`} />\n          <Card.ImgOverlay style={{ padding: 0 }}>\n            <h2>\n              <Badge variant='info'>SALE</Badge>\n            </h2>\n          </Card.ImgOverlay>\n        </Col>\n        <Col md={8}>\n          <h2>{name}</h2>\n          <p>{description}</p>\n          <Link to={`/product/${props.product.product_id}`} className='btn btn-danger rounded-pill'>\n            Buy now\n          </Link>\n        </Col>\n      </Row>\n    </Card>\n  );\n}\n","import { Card } from '@material-ui/core';\nimport * as React from 'react';\nimport { CardDeck, CardGroup, Container, Jumbotron, Row } from 'react-bootstrap';\nimport { Col } from 'react-bootstrap';\nimport { connect, DispatchProp } from 'react-redux';\nimport JumboTronCard from '../components/CompJumboTronCard';\nimport CompProductCard from '../components/CompProductCard';\nimport PromotionCard from '../components/CompProductPromotionCard';\nimport { actionGetProducts } from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { IProductState } from '../models/reducers/Products';\n\nexport interface IHomePageProps extends DispatchProp {\n  products: IProductState;\n}\nclass HomePage extends React.Component<IHomePageProps> {\n  constructor (props: IHomePageProps) {\n    super(props);\n  }\n  public componentWillMount () {\n    this.props.dispatch(actionGetProducts());\n  }\n  public render () {\n    const products = this.props.products;\n    return (\n      <Container className='p-0'>\n        <Jumbotron className='jumboTron'>\n          <JumboTronCard />\n        </Jumbotron>\n        <Container className='bg-light p-4'>\n          {products.promotion ? <PromotionCard product={products.promotion} /> : null}\n          <Card className='my-4 border-0' style={{boxShadow: 'none'}}>\n            <h2 className='text-muted m-2 ml-4'>HOT</h2>\n            <CardDeck className='p-4 border-0'>\n              {products.products.rows.slice(0, 4).map((product) => (\n                <CompProductCard product={product} />\n              ))}\n            </CardDeck>\n          </Card>\n        </Container>\n      </Container>\n    );\n  }\n}\n\nconst mapStateToProps = (state: IRootState) => {\n  return {\n    products: state.Products\n  };\n};\n\nexport default connect(mapStateToProps)(HomePage);\n","import { Checkbox, FormControlLabel } from '@material-ui/core';\nimport Favorite from '@material-ui/icons/Favorite';\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\nimport IconStar from '@material-ui/icons/Star';\nimport IconStarBorder from '@material-ui/icons/StarBorder';\nimport human from 'human-time';\nimport React from 'react';\nimport { Button, Container, Form, Row } from 'react-bootstrap';\nimport { Col } from 'react-bootstrap';\nimport Rating from 'react-rating';\nimport { IReview } from '../models/schemas';\ninterface IProductReviewEntryProps {\n  review: IReview;\n}\n\nexport default function CompProductReviewEntry (props: IProductReviewEntryProps) {\n  const review = props.review;\n  return (\n    <Container className='mt-2'>\n      <Row>\n        <Col md={4}>\n          <Rating\n            readonly\n            initialRating={review.rating}\n            emptySymbol={<IconStarBorder className='text-warning' />}\n            fullSymbol={<IconStar className='text-warning' />}\n            className='mb-3'\n          />\n          <h4>{review.name}</h4>\n          <p className='text-mute'>{human(new Date(review.created_on))}</p>\n        </Col>\n        <Col md={8}>\n          <p>{review.review}</p>\n          <p>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  icon={<FavoriteBorder />}\n                  checkedIcon={<Favorite />}\n                  value='checkedH'\n                  className='text-danger'\n                />\n              }\n              label='1'\n            />\n          </p>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n","import IconStar from '@material-ui/icons/Star';\nimport IconStarBorder from '@material-ui/icons/StarBorder';\nimport React from 'react';\nimport { Button, Container, Form, Row } from 'react-bootstrap';\nimport { Col } from 'react-bootstrap';\nimport Rating from 'react-rating';\nimport { IReview } from '../models/schemas';\n\ninterface IProductReviewFormProps {\n  onSubmit: (data: IReview) => void;\n  defaultRating: number;\n}\n\nexport default function CompProductReviewForm (props: IProductReviewFormProps) {\n  let rating = props.defaultRating;\n  return (\n    <Container>\n      <Form\n        className='mt-4'\n        method='get'\n        onSubmit={(e: any) => {\n          e.preventDefault();\n          e.stopPropagation();\n          const formData = new FormData(e.currentTarget);\n          const review = {\n            name: formData.get('nickname') as string,\n            review: formData.get('review') as string,\n            rating,\n            created_on: new Date().toISOString()\n          };\n          props.onSubmit(review);\n          e.currentTarget.reset();\n          return false;\n        }}>\n        <Form.Group as={Row} controlId='formHorizontalNickname' className='mt-4'>\n          <Col md={4}>\n            <Form.Label column className='pl-0'>\n              <h6>Choose a nickname</h6>\n            </Form.Label>\n          </Col>\n          <Col md={6}>\n            <Form.Control\n              as='input'\n              size='lg'\n              name='nickname'\n              type='text'\n              placeholder=''\n              required\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row} controlId='formHorizontalReview' className='mt-4'>\n          <Col md={4}>\n            <Form.Label column className='pl-0'>\n              <h6>Your review</h6>\n            </Form.Label>\n          </Col>\n          <Col md={8}>\n            <Form.Control\n              as='textarea'\n              minlength='50'\n              size='lg'\n              style={{ height: '10rem' }}\n              placeholder=''\n              name='review'\n              required\n            />\n            <p className='text-secondary font-weight-light'>\n              Your review should have at least 50 characters\n            </p>\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row} controlId='formHorizontalRating' className='mt-4'>\n          <Col md={4}>\n            <Form.Label column className='pl-0'>\n              <h6>Overall rating</h6>\n            </Form.Label>\n          </Col>\n          <Col md={8}>\n            <Rating\n              initialRating={4.5}\n              onChange={(val: number) => {\n                rating = val;\n              }}\n              emptySymbol={<IconStarBorder className='text-warning' />}\n              fullSymbol={<IconStar className='text-warning' />}\n              className='mb-3'\n            />\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row} controlId='formHorizontalRating' className='mt-4 mb-4'>\n          <Col md={4} />\n          <Col md={8}>\n            <Button type='submit' variant='danger' size='lg' className='rounded-pill'>\n              Submit\n            </Button>\n          </Col>\n        </Form.Group>\n      </Form>\n    </Container>\n  );\n}\n","import { Checkbox, FormControlLabel } from '@material-ui/core';\nimport Favorite from '@material-ui/icons/Favorite';\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\nimport IconStar from '@material-ui/icons/Star';\nimport IconStarBorder from '@material-ui/icons/StarBorder';\nimport human from 'human-time';\nimport React from 'react';\nimport { Container, Row } from 'react-bootstrap';\nimport { Col } from 'react-bootstrap';\nimport Rating from 'react-rating';\nimport { connect, DispatchProp } from 'react-redux';\nimport { actionPostProductReviews } from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { IProductState } from '../models/reducers/Products';\nimport { IReview } from '../models/schemas';\nimport CompProductReviewEntry from './CompProductReviewEntry';\nimport CompProductReviewForm from './CompProductReviewForm';\n\ninterface IProductViewProps extends DispatchProp {\n  products: IProductState;\n  productId: number;\n}\n\nfunction CompProductReviewSession (props: IProductViewProps) {\n  return (\n    <Container className='bg-light pt-4'>\n      <Row>\n        <Col md={1} />\n        <Col md={10}>\n          <Container className='mt-4  mb-4'>\n            <Row>\n              <Col md={6}>\n                <h3>Product reviews</h3>\n              </Col>\n            </Row>\n          </Container>\n          {props.products.productReviews.map((review: IReview) => (\n            <CompProductReviewEntry review={review} />\n          ))}\n        </Col>\n      </Row>\n      <Row>\n        <Col md={1} />\n        <Col md={10}>\n          <hr />\n        </Col>\n      </Row>\n      <Row>\n        <Col md={1} />\n        <Col md={10}>\n          <Container className='mt-4  mb-4'>\n            <Row>\n              <Col md={6}>\n                <h3 className='mt-4 mb-4'>Add review</h3>\n              </Col>\n            </Row>\n          </Container>\n          <CompProductReviewForm\n            defaultRating={5}\n            onSubmit={(review: IReview) => {\n              return props.dispatch(actionPostProductReviews(props.productId, review));\n            }}\n          />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default connect((state: IRootState) => {\n  return {\n    products: state.Products\n  };\n})(CompProductReviewSession);\n","import * as React from 'react';\nimport { Breadcrumb, ButtonGroup } from 'react-bootstrap';\nimport { Card, CardGroup, Container, Jumbotron, Row } from 'react-bootstrap';\nimport { Button, Col } from 'react-bootstrap';\nimport Rating from 'react-rating';\nimport { connect, DispatchProp } from 'react-redux';\nimport { RouteComponentProps, RouteProps } from 'react-router';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport CompProductCard from '../components/CompProductCard';\nimport PromotionCard from '../components/CompProductPromotionCard';\nimport { CDN_ROOT } from '../configs';\n\nimport IconStar from '@material-ui/icons/Star';\nimport IconStarBorder from '@material-ui/icons/StarBorder';\n\nimport { Checkbox, FormControlLabel } from '@material-ui/core';\nimport Favorite from '@material-ui/icons/Favorite';\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\nimport human from 'human-time';\nimport { withSnackbar, withSnackbarProps } from 'notistack';\nimport { ButtonToolbar } from 'react-bootstrap';\nimport { Media } from 'react-bootstrap';\nimport { Form } from 'react-bootstrap';\nimport { Interface } from 'readline';\nimport CompColorPicker from '../components/CompColorPicker';\nimport CompProductReviewSession from '../components/CompProductReviewSession';\nimport CompQuantityInput from '../components/CompQuantityInput';\nimport CompSizePicker from '../components/CompSizePicker';\nimport {\n  actionAddCartItem,\n  actionGetProductAttributes,\n  actionGetProductCategories,\n  actionGetProductDetail,\n  actionGetProductReviews,\n  actionGetProducts\n} from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { ICategoriesState } from '../models/reducers/Categories';\nimport { IProductState } from '../models/reducers/Products';\nimport { IAttributeProductValue, IReview } from '../models/schemas';\ninterface IProductRouteParams {\n  id: string;\n}\n\ninterface IProductPageProps\n  extends DispatchProp,\n    RouteComponentProps<IProductRouteParams>,\n    withSnackbarProps {\n  products: IProductState;\n  categories: ICategoriesState;\n}\n\ninterface IProductPageState {\n  productImage: string;\n  quantity: number;\n  attributes: {\n    [index: string]: IAttributeProductValue;\n  };\n}\n\nclass ProductPage extends React.Component<IProductPageProps, IProductPageState> {\n  constructor (props: IProductPageProps) {\n    super(props);\n    this.state = {\n      productImage: '',\n      quantity: 1,\n      attributes: {}\n    };\n  }\n\n  public componentWillReceiveProps (props: IProductPageProps) {\n    const { productDetail } = props.products;\n    if (productDetail) {\n      this.setState({\n        productImage: productDetail.image\n      });\n    }\n  }\n\n  public componentWillMount () {\n    const {\n      dispatch,\n      match: { params }\n    } = this.props;\n    const productId = parseInt(params.id, 10);\n    dispatch(actionGetProductDetail(productId));\n    dispatch(actionGetProductCategories(productId));\n    dispatch(actionGetProductAttributes(productId));\n    dispatch(actionGetProductReviews(productId));\n  }\n\n  get availableSizes (): string[] {\n    const { productAtrributes } = this.props.products;\n    const availableSizes = productAtrributes\n      .filter((attr: IAttributeProductValue) => attr.attribute_name === 'Size')\n      .map((attr: IAttributeProductValue) => attr.attribute_value);\n    return availableSizes;\n  }\n\n  get availableColors (): string[] {\n    const { productAtrributes } = this.props.products;\n    const availableColors = productAtrributes\n      .filter((attr: IAttributeProductValue) => attr.attribute_name === 'Color')\n      .map((attr: IAttributeProductValue) => attr.attribute_value);\n    return availableColors;\n  }\n\n  get haveDiscounted (): boolean {\n    const { productDetail } = this.props.products;\n    if (!productDetail) {\n      return false;\n    }\n    return parseFloat(productDetail.discounted_price) > 0;\n  }\n\n  public addCartItem = () => {\n    const { productDetail } = this.props.products;\n    if (productDetail) {\n      const attributes = Object.keys(this.state.attributes).map(\n        (key) => this.state.attributes[key]\n      );\n      this.props.dispatch(actionAddCartItem(productDetail, attributes, this.state.quantity));\n      this.props.enqueueSnackbar(\n        <span>\n          <strong>{productDetail.name}</strong> was added to cart!\n        </span>,\n        {\n          variant: 'success',\n          preventDuplicate: true\n        }\n      );\n    }\n  }\n\n  public quantityChangeHandler = (quantity: number) => {\n    this.setState({ quantity });\n  }\n\n  public productImageChangeHandler = (productImage: string) => () => {\n    this.setState({ productImage });\n  }\n\n  public colorChangeHandler = (color: string) => {\n    setTimeout(() => {\n      const { productAtrributes } = this.props.products;\n      const attributes = { ...this.state.attributes };\n      const colorAttributeValue = productAtrributes.find(\n        (attr) => attr.attribute_name === 'Color' && attr.attribute_value === color\n      );\n      if (colorAttributeValue) {\n        const attrColor = { ...colorAttributeValue };\n        attributes[colorAttributeValue.attribute_name] = attrColor;\n        this.setState({ attributes });\n      }\n    }, 1);\n  }\n\n  public sizeChangeHandler = (size: string) => {\n    const { productAtrributes } = this.props.products;\n    const attributes = { ...this.state.attributes };\n    const sizeAttributeValue = productAtrributes.find(\n      (attr) => attr.attribute_name === 'Size' && attr.attribute_value === size\n    );\n    if (sizeAttributeValue) {\n      const attrSize = { ...sizeAttributeValue };\n      attributes[sizeAttributeValue.attribute_name] = attrSize;\n      this.setState({ attributes });\n    }\n  }\n\n  public render () {\n    const { productDetail } = this.props.products;\n    const { productCategories } = this.props.categories;\n    if (!productDetail) {\n      // TODO: Return shimmer plaveholder here.\n      return null;\n    }\n    const catName = productCategories.length ? productCategories[0].name : '';\n    const { name, image, image_2, thumbnail, price, discounted_price } = productDetail;\n\n    return (\n      <Card className='border-0'>\n        <Container>\n          <Row>\n            <Col md={6}>\n              <Container className='p-4 w-100 h-100'>\n                <div\n                  className='w-100 h-100'\n                  style={{\n                    backgroundImage: `url(${CDN_ROOT}${this.state.productImage})`,\n                    backgroundPosition: 'center',\n                    backgroundSize: 'contain',\n                    backgroundRepeat: 'no-repeat'\n                  }}\n                />\n              </Container>\n            </Col>\n            <Col md={6}>\n              <Card.Body>\n                <Breadcrumb className='mt-2 text-muted'>\n                  <Breadcrumb.Item href='/'>Home</Breadcrumb.Item>\n                  <Breadcrumb.Item href='/'>All Categories</Breadcrumb.Item>\n                  {catName ? <Breadcrumb.Item active>{catName}</Breadcrumb.Item> : null}\n                </Breadcrumb>\n                <Rating\n                  initialRating={3.5}\n                  emptySymbol={<IconStarBorder className='text-warning' />}\n                  fullSymbol={<IconStar className='text-warning' />}\n                  className='mb-3'\n                />\n                <Card.Title as='h4'>{name}</Card.Title>\n                <Card.Text as='h3' className='mt-4 mb-4'>\n                  <span className='text-danger pr-3'>\n                    ${this.haveDiscounted ? discounted_price : price}\n                  </span>\n                  {this.haveDiscounted ? (\n                    <sup>\n                      <del>${price}</del>\n                    </sup>\n                  ) : null}\n                </Card.Text>\n\n                <h6 className='text-muted mb-2'>Color</h6>\n                <CompColorPicker\n                  colors={this.availableColors}\n                  onColorChange={this.colorChangeHandler}\n                />\n\n                <h6 className='text-muted mt-4 mb2'>Size</h6>\n                <CompSizePicker\n                  sizes={this.availableSizes}\n                  onSizeChange={this.sizeChangeHandler}\n                />\n\n                <h6 className='text-muted mt-4 mb2'>Quantity</h6>\n                <CompQuantityInput\n                  value={this.state.quantity}\n                  max={10}\n                  min={1}\n                  step={1}\n                  onChange={this.quantityChangeHandler}\n                />\n              </Card.Body>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={6}>\n              <Container className='p-4'>\n                <Row>\n                  <Col className='d-lg-none d-xl-none col d-md-none'>\n                    <Card.Img src={`${CDN_ROOT}${this.state.productImage}`} />\n                  </Col>\n                </Row>\n                <Row className='justify-content-center'>\n                  {/* TODO: Adding support for dynamic images here  */}\n                  {[image, image_2, thumbnail].map((img) => (\n                    <Button\n                      variant='dark'\n                      size='lg'\n                      style={{\n                        margin: '0.225rem',\n                        width: '5rem',\n                        height: '5rem',\n                        backgroundImage: `url(${CDN_ROOT}${img})`,\n                        backgroundPosition: 'center',\n                        backgroundSize: 'contain',\n                        backgroundRepeat: 'no-repeat'\n                      }}\n                      onClick={this.productImageChangeHandler(img)}\n                    />\n                  ))}\n                </Row>\n              </Container>\n            </Col>\n            <Col md={3}>\n              <Card.Body>\n                <Button\n                  variant='danger'\n                  size='lg'\n                  className='rounded-pill'\n                  onClick={this.addCartItem}>\n                  Add to cart\n                </Button>\n              </Card.Body>\n            </Col>\n            <Col md={3}>\n              <Card.Body>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      icon={<FavoriteBorder />}\n                      checkedIcon={<Favorite />}\n                      value='checkedH'\n                      className='text-danger'\n                    />\n                  }\n                  label='Add to Wish List'\n                />\n              </Card.Body>\n            </Col>\n          </Row>\n        </Container>\n        <CompProductReviewSession productId={productDetail.product_id} />\n      </Card>\n    );\n  }\n}\n\nconst mapStateToProps = (state: IRootState) => {\n  return {\n    products: state.Products,\n    categories: state.Categories\n  };\n};\n\nexport default connect(mapStateToProps)(withSnackbar(ProductPage));\n","import React from 'react';\nimport { ButtonGroup, ButtonToolbar, Pagination } from 'react-bootstrap';\n\ninterface IPaginationBarProps {\n  count: number;\n  page: number;\n  limit: number;\n  showCount: number;\n  onPage?: (p: number) => void;\n}\n\nexport default function CompPaginationBar (props: IPaginationBarProps) {\n  const pageCount = Math.ceil(props.count / props.limit);\n  const showCount = Math.min(props.showCount, pageCount);\n  const page = props.page;\n  const items = Array.from(Array(pageCount + 1).keys()).slice(1);\n  let leftEllipsis = false;\n  let rightEllipsis = false;\n  while (items.length > showCount) {\n    if (items[items.length - 2] > page) {\n      items.splice(-2, 1);\n      rightEllipsis = true;\n    }\n    if (items[1] < page && items.length > showCount) {\n      items.splice(1, 1);\n      leftEllipsis = true;\n    }\n  }\n  if (leftEllipsis) {\n    items.splice(1, 0, -1);\n  }\n  if (rightEllipsis) {\n    items.splice(-1, 0, -1);\n  }\n\n  return (\n    <Pagination>\n      <Pagination.First onClick={() => props.onPage && props.onPage(1)} />\n      {items.map((p, index) => {\n        return p > 0 ? (\n          <Pagination.Item\n            style={{ boxShadow: 'none' }}\n            onClick={() => props.onPage && props.onPage(p)}\n            active={p === page}>\n            {p}\n          </Pagination.Item>\n        ) : (\n          <Pagination.Ellipsis disabled />\n        );\n      })}\n      <Pagination.Last onClick={() => props.onPage && props.onPage(pageCount)} />\n    </Pagination>\n  );\n}\n","import qs from 'qs';\nimport * as React from 'react';\nimport { Card, CardDeck, Col, Container, Row } from 'react-bootstrap';\nimport { Button } from 'react-bootstrap';\nimport { DispatchProp } from 'react-redux';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport CompColorPicker from '../components/CompColorPicker';\nimport CompPaginationBar from '../components/CompPaginationBar';\nimport CompProductCard from '../components/CompProductCard';\nimport CompSizePicker from '../components/CompSizePicker';\nimport { actionGetProducts, actionSeachProducts } from '../models/actions';\nimport { IRootState } from '../models/reducers';\nimport { IProductState } from '../models/reducers/Products';\nimport { IProduct } from '../models/schemas';\nimport { arrayChunks } from '../utils';\n\ninterface ISearchPageProps extends DispatchProp, RouteComponentProps {\n  products: IProductState;\n}\nclass SearchPage extends React.Component<ISearchPageProps> {\n  public componentWillMount () {\n    const { search = '' } = this.props.location;\n    if (search) {\n      const query = qs.parse(search.substr(1));\n      if (query.query_string) {\n        return this.props.dispatch(actionSeachProducts(query.query_string));\n      }\n    }\n    this.props.dispatch(actionGetProducts());\n  }\n\n  public componentWillReceiveProps (props: ISearchPageProps) {\n    if (this.props.location === props.location) {\n      return;\n    }\n    const { search = '' } = props.location;\n    if (search) {\n      const query = qs.parse(search.substr(1));\n      if (query.query_string) {\n        return props.dispatch(actionSeachProducts(query.query_string));\n      }\n    }\n    this.props.dispatch(actionGetProducts());\n  }\n\n  public render () {\n    const products = this.props.products;\n    const rows = arrayChunks(products.products.rows, 3);\n    return (\n      <Container>\n        <Row>\n          <Col md={3}>\n            <Container>\n              <Card className='bg-light mt-4 p-4 rounded-0'>\n                <Card.Title as='h6'>Filters {products.products.count} items</Card.Title>\n              </Card>\n              <Card className='p-4 rounded-0  d-block'>\n                <Card.Title as='h6' className='text-muted'>\n                  Color\n                </Card.Title>\n                <CompColorPicker colors={['red', 'green', 'blue']} />\n                <Card.Title as='h6' className='text-muted'>\n                  Size\n                </Card.Title>\n                <CompSizePicker sizes={['XS', 'S', 'M', 'L', 'XL']} />\n\n                <Button variant='danger' size='sm' className='d-block rounded-pill'>\n                  Apply\n                </Button>\n              </Card>\n            </Container>\n          </Col>\n          <Col md={9}>\n            <Container>\n              <Row>\n                <Col md={12}>\n                  {rows.map((items) => (\n                    <CardDeck className='p-4'>\n                      {items.map((product: IProduct) => (\n                        <CompProductCard product={product} />\n                      ))}\n                    </CardDeck>\n                  ))}\n                  {!rows.length ? (\n                    <h3 className='text-muted p-4 text-center'>\n                      No product founds for <strong>{products.queryString}</strong>!\n                    </h3>\n                  ) : null}\n                </Col>\n              </Row>\n              <Row>\n                <Col md={12}>\n                  {rows.length ? (\n                    <Container className='d-flex justify-content-end p-4'>\n                      <CompPaginationBar\n                        limit={products.limit}\n                        count={products.products.count}\n                        page={products.page}\n                        showCount={5}\n                        onPage={(page) => this.props.dispatch(actionGetProducts(page))}\n                      />\n                    </Container>\n                  ) : (\n                    ''\n                  )}\n                </Col>\n              </Row>\n            </Container>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default connect((state: IRootState) => {\n  return {\n    products: state.Products\n  };\n})(SearchPage);\n","import React, { Component } from 'react';\n\nimport { Container } from 'react-bootstrap';\nimport { connect, DispatchProp } from 'react-redux';\nimport { Route, RouteComponentProps, withRouter } from 'react-router-dom';\nimport CompCartDialog from './components/CompCartDialog';\nimport CompFooterNav from './components/CompFooterNav';\nimport CompLoginDialog from './components/CompLoginDialog';\nimport CompRegisterDialog from './components/CompRegisterDialog';\nimport CompTopNavBar from './components/CompTopNavBar';\nimport { actionGetCategories } from './models/actions';\nimport HomePage from './routers/HomePage';\nimport ProductPage from './routers/ProductPage';\nimport SearchPage from './routers/SearchPage';\n\ninterface IAppProps extends DispatchProp, RouteComponentProps {}\n\nclass App extends Component<IAppProps> {\n  public componentWillMount () {\n    this.props.dispatch(actionGetCategories());\n  }\n\n  public componentDidUpdate (prevProps: IAppProps) {\n    const locationChanged = this.props.location !== prevProps.location;\n    if (locationChanged) {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  public render () {\n    return (\n      <Container className='border-left border-right p-0'>\n        <CompTopNavBar />\n        <Route exact path='/' component={HomePage} />\n        <Route exact path='/product/:id' component={ProductPage} />\n        <Route exact path='/search' component={SearchPage} />\n        <CompFooterNav />\n        <CompLoginDialog />\n        <CompRegisterDialog />\n        <CompCartDialog />\n      </Container>\n    );\n  }\n}\n\nexport default withRouter(connect()(App));\n","import Cart from './Cart';\nimport Categories, { ICategoriesState } from './Categories';\nimport Customer from './Customer';\nimport Products, { IProductState } from './Products';\n\nimport { combineReducers } from 'redux';\nimport { ICustomer } from '../schemas';\nimport Dialogs, { IDialogState } from './Dialogs';\n\nexport interface IRootState {\n  Cart: any;\n  Categories: ICategoriesState;\n  Customer: ICustomer;\n  Products: IProductState;\n  Dialogs: IDialogState;\n}\n\nconst rootReducer = combineReducers({\n  Cart,\n  Categories,\n  Customer,\n  Products,\n  Dialogs\n});\n\nexport default rootReducer;\n","import { ActionTypes } from '..';\nimport { IAction, IAttributeProductValue, ICartItem, IProductDetail } from '../schemas';\n\nexport interface ICartState {\n  items: {\n    [index: string]: ICartItem;\n  };\n  total: number;\n}\n\nexport default function Cart (\n  state = {\n    items: {},\n    total: 0\n  } as ICartState,\n  action: IAction\n): ICartState {\n  const { type, params } = action;\n  switch (type) {\n    case ActionTypes.ADD_CART_ITEM: {\n      const { product, attributes, quantity } = params as ICartItem;\n      const itemId = JSON.stringify({\n        id: product.product_id,\n        attr: attributes.map((attr) => attr.attribute_value)\n      });\n      const price = parseFloat(product.discounted_price) || parseFloat(product.price);\n      const subtotal = quantity * price;\n      const newState = { ...state };\n      if (newState.items[itemId]) {\n        newState.items[itemId].quantity += quantity;\n        newState.items[itemId].subtotal += subtotal;\n      } else {\n        newState.items[itemId] = {\n          product,\n          attributes,\n          quantity,\n          itemId,\n          subtotal\n        };\n      }\n      newState.total = 0;\n      Object.keys(newState.items).forEach((key) => {\n        newState.total += newState.items[key].subtotal;\n      });\n      return newState;\n    }\n\n    case ActionTypes.REMOVE_CART_ITEM: {\n      const { itemId } = params;\n      if (state.items[itemId]) {\n        const newState = { ...state };\n        delete newState.items[itemId];\n        newState.total = 0;\n        Object.keys(newState.items).forEach((key) => {\n          newState.total += newState.items[key].subtotal;\n        });\n        return newState;\n      }\n    }\n\n    case ActionTypes.UPDATE_CART_ITEM: {\n      const { itemId, quantity } = params;\n      if (state.items[itemId]) {\n        const newState = { ...state };\n        const product = newState.items[itemId].product;\n        const price = parseFloat(product.discounted_price) || parseFloat(product.price);\n        newState.items[itemId].quantity = quantity;\n        newState.items[itemId].subtotal = quantity * price;\n        newState.total = 0;\n        Object.keys(newState.items).forEach((key) => {\n          newState.total += newState.items[key].subtotal;\n        });\n        return newState;\n      }\n    }\n\n    case ActionTypes.CHECKOUT_CART: {\n      return {\n        total: 0,\n        items: {}\n      };\n    }\n  }\n  return state;\n}\n","import { ActionTypes } from '..';\nimport { IAction, ICategoriesList, ICategory, IProductCategoryInfo } from '../schemas';\n\nexport interface ICategoriesState {\n  categories: ICategoriesList;\n  limit: number;\n  page: number;\n  categoriesDict: {\n    [index: number]: ICategory;\n  };\n  productCategories: ICategory[];\n  fetchingCount: number;\n}\n\nexport default function Categories (\n  state = {\n    categories: { count: 0, rows: [] },\n    page: 1,\n    limit: 20,\n    categoriesDict: {},\n    productCategories: [],\n    fetchingCount: 0\n  } as ICategoriesState,\n  action: IAction\n): ICategoriesState {\n  const { type, params } = action;\n  switch (type) {\n    case ActionTypes.GET_CATEGORIES:\n      if (params.isFetching) {\n        return {\n          ...state,\n          fetchingCount: state.fetchingCount + 1\n        };\n      }\n      const newState = {\n        ...state,\n        fetchingCount: state.fetchingCount - 1\n      };\n      if (params.success) {\n        const { limit, page, data } = params;\n        newState.limit = limit;\n        newState.page = page;\n        newState.categories = data;\n        // Update categories dictionary.\n        newState.categories.rows.forEach((category) => {\n          newState.categoriesDict[category.category_id] = category;\n        });\n      }\n      return newState;\n    case ActionTypes.GET_PRODUCT_CATEGORIES:\n      if (params.success) {\n        return {\n          ...state,\n          productCategories: params.data.map(\n            (cat: IProductCategoryInfo) => state.categoriesDict[cat.category_id]\n          )\n        };\n      }\n      break;\n  }\n  return state;\n}\n","import { ActionTypes } from '..';\nimport { IAction, ICustomer } from '../schemas';\n\nexport default function Customer(state = {} as ICustomer, action: IAction): ICustomer {\n  const { type, params } = action;\n  switch (type) {\n    case ActionTypes.CUSTOMER_LOGIN: {\n      return {\n        ...state,\n        ...params\n      };\n    }\n    case ActionTypes.CUSTOMER_LOGOUT: {\n      return {} as ICustomer;\n    }\n  }\n  return state;\n}\n","import { ActionTypes } from '..';\nimport {\n  IAction,\n  IAttributeProductValue,\n  IProduct,\n  IProductComplete,\n  IProductDetail,\n  IProductList,\n  IReview\n} from '../schemas';\n\nexport interface IProductDetailDict {\n  [index: number]: IProductComplete;\n}\nexport interface IProductState {\n  products: IProductList;\n  productDetail: IProductComplete | null;\n  productAtrributes: IAttributeProductValue[];\n  productReviews: IReview[];\n  page: number;\n  limit: number;\n  promotion: IProduct | null;\n  fetchingCount: number;\n  queryString: string;\n}\n\nexport default function Products (\n  state = {\n    products: {\n      count: 0,\n      rows: []\n    },\n    productDetail: null,\n    productAtrributes: [],\n    productReviews: [],\n    page: 1,\n    limit: 20,\n    promotion: null,\n    fetchingCount: 0,\n    queryString: ''\n  } as IProductState,\n  action: IAction\n): IProductState {\n  const { type, params } = action;\n  switch (type) {\n    case ActionTypes.GET_PRODUCTS:\n      if (params.isFetching) {\n        return {\n          ...state,\n          fetchingCount: state.fetchingCount + 1\n        };\n      }\n      const newState = {\n        ...state,\n        fetchingCount: state.fetchingCount - 1\n      };\n      if (params.success) {\n        const { limit, page, data } = params;\n        newState.limit = limit;\n        newState.page = page;\n        newState.products = data;\n        newState.queryString = params.queryString;\n        // Pick a product to promotion.\n        // TODO: need to be manage by backend.\n        if (newState.products.rows.length) {\n          newState.promotion = newState.products.rows[0];\n        }\n      }\n      return newState;\n    case ActionTypes.GET_PRODUCT_DETAILS:\n      if (params.success) {\n        return {\n          ...state,\n          productDetail: params.data\n        };\n      }\n      break;\n    case ActionTypes.GET_PRODUCT_ATTRIBUTES:\n      if (params.success) {\n        return {\n          ...state,\n          productAtrributes: params.data\n        };\n      }\n      break;\n\n    case ActionTypes.GET_PRODUCT_REVIEWS:\n      if (params.success) {\n        return {\n          ...state,\n          productReviews: params.data\n        };\n      }\n      break;\n  }\n  return state;\n}\n","import { ActionTypes } from '..';\nimport { IAction } from '../schemas';\n\nexport interface IDialogProps {\n  show?: boolean;\n  message?: string;\n  error?: string;\n  requesting?: boolean;\n}\n\nexport interface IDialogState {\n  [index: string]: IDialogProps;\n}\n\nexport default function Dialogs (\n  state = {} as IDialogState,\n  action: IAction\n): IDialogState {\n  const { type, params } = action;\n  switch (type) {\n    case ActionTypes.MODAL_DIALOG: {\n      const {name, ...props}  = params;\n      const dialogProps  = {\n        show: false,\n        message: '',\n        error: '',\n        requesting: false,\n        ...props\n      };\n      return {\n        ...state,\n        [name]: dialogProps\n      };\n    }\n  }\n  return state;\n}\n","import { applyMiddleware, createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport reduxPromise from 'redux-promise';\nimport reduxThunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nconst dataStore = createStore(rootReducer, composeWithDevTools(applyMiddleware(reduxThunk, reduxPromise)));\n\nexport default dataStore;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register (config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW (swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker (swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { SnackbarProvider } from 'notistack';\nimport React from 'react';\nimport { Button } from 'react-bootstrap';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\nimport { DataProvider } from './models';\nimport * as serviceWorker from './serviceWorker';\nimport './styles/index.css';\n\nReactDOM.render(\n  <DataProvider>\n    <Router>\n      <SnackbarProvider\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'center'\n        }}\n        action={[\n          <Button variant='link' className='text-light' size='sm'>\n            {'Dismiss'}\n          </Button>\n        ]}\n        autoHideDuration={2000}\n        maxSnack={1}>\n        <App />\n      </SnackbarProvider>\n    </Router>\n  </DataProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport dataStore from './dataStore';\n\nexport default function DataProvider (props: any) {\n  return <Provider store={dataStore}>\n  {props.children}\n  </Provider>;\n}\n"],"sourceRoot":""}